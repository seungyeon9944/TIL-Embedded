## 전기 전자 기초

### 직류 전기
임베디드에서는 주로 직류 전기를 다룬다 (교류 전기는 주로 전력 전송에 사용)

### DC 전력원
- **전력원** : 전기가 나오는 원천, **Source**라고 한다.
- 대표적으로 건전지가 있으며, 전력원은 항상 **VCC**와 **GND**를 가진다.

### 저항
임베디드 키트에 있는 저항은 두 종류
- **220 Ω** : 빨빨갈 (4띠) or 빨빨검갈 (5띠)
- **10k Ω** : 갈검주

![임베디드 키트의 저항](https://i.imgur.com/4IKD6gr.png)

### 정격 전압 / 정격 전류
기기가 제공할 수 있는 전압과 전류로, 
- 라즈베리 파이의 정격 전압, 전류 : 5V, 5A (정품 전원 어댑터를 사용하자 !)
- GPIO 핀의 공급 전압 : 최대 3.3V
- GPIO 모든 핀 총 전류 : 1A
- 각 GPIO 핀 전류 : 최대 16mA

가장 이상적인 연결 결론 : 전압은 반드시 일치하고 전류는 더 많이 공급한다 < 당연히 ..

---

## 임베디드 시스템 개발 방식 이해
임베디드 업계에서는 다음과 같은 방식 중 하나로 개발함
- Bare-metal (Firmware)
    - OS 없이 하드웨어에서 직접 동작하는 코드 작성
    - 주로 작은 MCU에서의 개발
- RTOS 개발
    - 실시간성을 보장하는 OS 사용
- 임베디드 리눅스 기반 개발
    - 풍부한 개발 도구와 생태계

### Cross compile
개발 환경과 실행 환경이 다른 경우 개발 PC에서 임베디드 보드용 실행 파일을 만드는 컴파일 방법. 개발 PC에서 컴파일 후 개발 보드에서는 실행만 함 !

---

## 개발환경 구축
### 라즈베리파이5
- 보드명 : **Raspberry Pi 5 Model B** (8GB램)
- 칩셋 : **BCM2712** (Broadcom 사)
- CPU : 2.4GHz ARM Cortex-A76 쿼드코어
- 통신 : wifi / BLE, Bluetooth 5.0 / 이더넷 등

라즈베리파이에서 HW 제어 하려면 ?
1. 리눅스 Device Driver 사용해서, GPIO 제어 (리눅스 커널)
2. 쉽게 사용할 수 있는 Wrapping된 함수 사용해서 GPIO 제어

라즈베리파이의 공식 Library
1. **gpiozero**
2. RPi.GPIO

### GPIO 핀
General Purpose Input Output Pin으로 
`https://pinout.xyz/` 참고하여 배선

---

## 디지털 아날로그 I/O 제어
예시 :
![회로 연결](https://i.imgur.com/mgt9xyz.png)

### ~/test 디렉토리 생성
`$mkdir ~/test`

`$cd ~/test`

`$vi led.py`

`$python3 led.py`

### LED 깜빡이는 코드
- `LED(pin)` : LED 객체 생성
- `.on( )` : HIGH 신호 보냄
- `.off( )` : LOW 신호 보냄

```
from gpiozero import LED
from time import sleep

red = LED(14)

while True:
    red.on()
    sleep(1)
    red.off()
    sleep(1)
```

### 디버깅 절차
1. 코드 체크
2. 회로 연결 체크 

그 외는 불량
(점퍼케이블 노후화, 브레드보드 내부 불량, 라즈베리파이의 GPIO핀 불량, 부품 자체 불량 등 ..)

### 버튼을 눌렀을 때 동작하는 코드
`$vi interrupt.py`

`$python3 interrupt.py`
- interrupt 방식 (이라 하지만, 내부적으로 Threading 동작)
- `.when_pressed` : 버튼 눌리면, callback 함수 호출
- `.when_released` : 버튼 눌리지않으면, callback 함수 호출
- `pause( )` : 프로세스 종료 or 시그너러 종료 받을 때까지 대기
- Python Signal 라이브러리를 이용해서 인터럽트 방식 구현

```
from gpiozero import Button
from signal import puse

def press():
    print("Btn Pressed!")

def release():
    print("Btn Released!")

btn = Button(15)

btn.when_pressed = press
btn.when_released = release

pause
```

### Floating 상태
*pb)* 라즈베리파이는 스위치를 누르기 전까지 어떤 값인지 확정 지을 수 없음

*sol)* 스위치를 누르지 않을 때 HIGH/LOW인지 정하면 됨
- **누르지 않았을 때, HIGH (UP) → 풀업**
- 누르지 않았을 때, LOW (DOWN) → 풀다운

### 풀업 회로
![풀업 회로](https://i.imgur.com/ajFZzqZ.png)

![풀업 회로 연결](https://i.imgur.com/nXgmTvB.png)

풀다운 회로보다 **노이즈 제거, 회로 보호** 등의 이점이 많음